<!DOCTYPE html>
<html>
<head>
	<style>
	html,body{
		width: 100%;
		height: 100%;
		margin: 0;
	}
	body{
		display: flex;
		justify-content: center;
		/*align-items: center;*/
	}
	h1{
		font-size: 7vmin;
	}
</style>

</head>
<body>
		<h1 id="result"></h1>
<script>

// Sappho
var source = " My sentence is for open Warr: Of Wiles,   More unexpert, I boast not: them let those   Contrive who need, or when they need, not now.   For while they sit contriving, shall the rest,   Millions that stand in Arms, and longing wait   The Signal to ascend, sit lingring here   Heav'ns fugitives, and for thir dwelling place   Accept this dark opprobrious Den of shame,   The Prison of his Tyranny who Reigns   By our delay? no, let us rather choose   Arm'd with Hell flames and fury all at once   O're Heav'ns high Towrs to force resistless way,   Turning our Tortures into horrid Arms   Against the Torturer; when to meet the noise   Of his Almighty Engin he shall hear   Infernal Thunder, and for Lightning see   Black fire and horror shot with equal rage   Among his Angels; and his Throne it self   Mixt with TARTAREAN Sulphur, and strange fire,   His own invented Torments.  But perhaps   The way seems difficult and steep to scale   With upright wing against a higher foe.   Let such bethink them, if the sleepy drench   Of that forgetful Lake benumme not still,   That in our proper motion we ascend   Up to our native seat: descent and fall   To us is adverse.  Who but felt of late   When the fierce Foe hung on our brok'n Rear   Insulting, and pursu'd us through the Deep,   With what compulsion and laborious flight   We sunk thus low?  Th' ascent is easie then;   Th' event is fear'd; should we again provoke   Our stronger, some worse way his wrath may find   To our destruction: if there be in Hell   Fear to be worse destroy'd: what can be worse   Then to dwell here, driv'n out from bliss, condemn'd   In this abhorred deep to utter woe;   Where pain of unextinguishable fire   Must exercise us without hope of end   The Vassals of his anger, when the Scourge   Inexorably, and the torturing houre   Calls us to Penance?  More destroy'd then thus   We should be quite abolisht and expire.   What fear we then? what doubt we to incense   His utmost ire? which to the highth enrag'd,   Will either quite consume us, and reduce   To nothing this essential, happier farr   Then miserable to have eternal being:   Or if our substance be indeed Divine,   And cannot cease to be, we are at worst   On this side nothing; and by proof we feel   Our power sufficient to disturb his Heav'n,   And with perpetual inrodes to Allarme,   Though inaccessible, his fatal Throne:   Which if not Victory is yet Revenge. ";

var dictionary = {};
var ngrams = [];
var len = 2;


for(var i = 0; i < source.length-len; i+=len){

	var ngram = source.substring(i, i+len);
	var ngramNext = source.substring(i+len, i+len*2);

	if(dictionary[ngram] === undefined){ 
		
		dictionary[ngram] = [];
	}
	
	dictionary[ngram].push(ngramNext);

	ngrams.push(ngram);
}


var firstGram = ngrams[ Math.floor(Math.random()*ngrams.length) ];
var phrase = [firstGram];


var generateLength = 40;

for(var i = 0; i < generateLength; i++){

	var prevWord = phrase[i];

	var nextArray = dictionary[prevWord];

	var nextWord = nextArray[ Math.floor(Math.random()*nextArray.length) ];
	phrase.push(nextWord);
}

var string = "";
for(var i = 0; i < phrase.length; i++){
	string += phrase[i];
}

console.log(string);

document.getElementById("result").innerHTML = string;

</script>
</body>
</html>